---
title: "Ветвления —\_работа с клавиатурой"
description: Цок-цок-цок-цок-цок
published: true
---
Вы уже умеете работать с мышью. Работа с клавиатурой в Processing устроена очень похоже, только кнопок на клавиатуре гораздо больше. Вот например тут при нажатии любой клавиши цвет меняется

```python
# Нажмите на холст, чтобы переключить на него фокус,
#, а затем нажмите любую клавишу.
# Примечание: прямоугольник в этом примере может
# мерцать, поскольку операционная система может
# регистрировать долгое нажатие клавиши как повторение
# нажатий клавиш.

def draw():
    if keyPressed == True: 
        fill(0)
    else:
        fill(255)
    rect(25, 25, 50, 50)

```
Если нужно указать, какая именно клавиша нажата, используем переменную key — именно туда записывается символ. Причём нужно указывать символы с обеих клавиатур, если указать только „B”, в русской раскладке работать не будет

```python
# Щелкните по окну, чтобы сфокусироваться,
# и нажмите клавишу «B» (английскую).
# с shift тоже работает
# В русской раскладке там символ «и»,
# Это тоже указано, иначе в русской раскладке
# работать не будет

def draw():
    if keyPressed:
        if key == 'b' or key == 'B' or key == 'и' or key == 'И':
            fill(0)

    else:
        fill(255)

    rect(25, 25, 50, 50)

# Работает и для BACKSPACE, TAB, ENTER, RETURN, ESC, и DELETE

```

Кроме символов, можно использовать клавиши, включённые в ASCII (BACKSPACE, TAB, ENTER, RETURN, ESC, и DELETE). Именно так и пишите,

```python
if key == ENTER:
```

Как быть с Shift, Ctrl, Alt и стрелками? Используйте keyCode:

```python
fillVal = color(126)

def draw():
    fill(fillVal)
    rect(25, 25, 50, 50)


def keyPressed():
    global fillVal
    if key == CODED:
        if keyCode == UP: 
            fillVal = 255
        elif keyCode == DOWN:
            fillVal = 0
    else: # для незакодированных клавиш
        fillVal = 126
```

Для стрелок значения UP, DOWN, LEFT, RIGHT, для оставшихся трёх ALT, CONTROL, SHIFT. Именно большими буквами и без кавычек — это не строки, это константы, «неизменяемые переменные»

И как вы заметили, как и для мыши, для клавиатуры есть отдельная функция keyPressed, которая пригодится, если вы хотите, чтобы действие при нажатии какой-то клавиши выполнялось только один раз, для этого оно и размещается за пределами draw(). Есть ещё keyReleased() — срабатывает, когда клавиша отпущена.

## Задания по теме «Ветвления — делаем кнопки»

1. «Печатаем буквы». На холсте выводится буква, соответствующая той, клавиша с которой нажата. В команду text() можно вставить не только сам текст, но и переменную, которая его подставляет. В том числе и key
2. «Управляй размером круга». На холсте круг, двумя кнопками увеличиваем/уменьшаем его размер
3. «Текстовый редактор». Расширим предыдущий проект — пусть выводится не одна буква, а набранный текст. Для этого заводится переменная, например, myText, и при нажатии на клавишу её символ прибавляется к переменной — myText = myText + key
4. «Управление стрелками». На холсте — простая или составная фигура. При нажатии на клавиши со стрелками она смещается вверх, вниз, влево или вправо. Пока без одновременного нажатия на клавиши
5. «Рисовалка с клавишами». Пусть клавиши переключают режимы — меняют цвет и толщину рисуемой линии, очищают холст и т.д.
6. «Понг». Шарик двигается по холсту, рикошетя от стен( как в занятии «Анимация туда-сюда»). Если он касается нижнего края — он падает

## Команды и т.д.

- **keyPressed** — нажата ли клавиша? Содержит True или False
- **key** — переменная, содержит символ нажатой клавиши или CODED
- **keyCode** —  если нажата ALT, CTRL, SHIFT или стрелка LEFT, RIGHT, UP, DOWN. При этом в key записывается CODED
- **keyPressed() / keyReleased()** — когда клавиша нажата/когда клавиша отпущена
- **textSize(20)** — размер текста
- **fill(255)** — цвет текста
- **textAlign(CENTER,CENTER)** — выравнивание текста по центру
- **text(u”Привет”,200,300)** — вывести текст в 200 от левого края и 300 от правого края
- **mouseClicked()** — функция, код в ней один раз срабатывает при нажатии мыши
- **mouseX, mouseY, pmouseX, pmouseY** — координаты курсора мыши
- **if mousePressed == True:** — если мышь нажата,
-          **noLoop()** — остановить цикл draw()
- **angle = 0** — записать в переменную angle число 0
- **rotate(radians(30))** — повернуть систему координат на 30 градусов
- **translate(200,300)** — прибавляет ко всем X после себя число 200 и ко всем Y после себя число 300
- **random(0,200)** — возвращает случайное число от 0 до 200. Не целое, но фигуры в Processing воспринимают нецелые параметры
- **frameRate(5)** — задаёт частоту кадров 5 кадров в секунду.
- **triangle(x1,y1,x2,y2,x3,y3)** — треугольник, в параметрах три точки (вершины)
- strokeWeight(5) — меняет толщину штриха (точек, линий, обводки) на 5
- noStroke() — убирает обводку
- stroke(22,21,255) — меняет цвет штриха на новый в формате RGB
- fill(100) — меняет цвет заливки на оттенок серого. Можно вписать три числа (RGB)

## Дополнительные задания/ Задания для работы дома

1. «Управляемый узор». Есть концентрический узор. При нажатии на клавиши угол поворота всего узора увеличивается или уменьшается, поэтому и весь узор вращается. Можно использовать стрелки
2. «Печать по нажатию на клавишу». При каждом нажатии клавиши в случайном месте рисуется фигура
3. Предыдущее, только рисуется не фигура, а узор
4. «Заполняем буквами». При нажатии на клавишу с буквой или цифрой она появляется в случайном месте, случайного цвета  и в случайном повороте. Помни, что чтобы повернуть фигуру вокруг центра, нужно использовать такую конструкцию:

```python
translate(150,-200) # 150 и -200 это координаты фигуры
rotate(radians(30)) #30 градусов — поворот вокруг центра
ellipse(0,0,60,20) # координаты 0 0 чтобы вращаться вокруг центра, настоящие
             #координаты указаны в translate()
```
Для rect не забываем про rectMode(CENTER), а для text про textAlign(CENTER,CENTER)
5. Точка бегает вправо-влево, отпечатывая след. Стрелками можно двигать её дополнительно вверх и вниз
6. Свой проект с использованием клавиш

## Рефлексия

<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSf1n0yIH-nxvxXbpHoqq6hJMXGZDAka2f9VIjLhKQI2WLls5A/viewform?embedded=true" width="640" height="709" frameborder="0" marginheight="0" marginwidth="0">Загрузка…</iframe>
