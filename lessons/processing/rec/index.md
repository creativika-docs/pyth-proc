---
title: Рекурсия и фракталы
description: 
---

## Теория

> Договоримся сразу о чём. Здесь и в дальнейшем часто функцией будет называться не только функция, но и процедура (команда). Такие дела.

Вы знакомы с циклами for и while. Но есть отдельный, особый случай — рекурсия. Рекурсия — это когда функция или процедура использует сама себя. В реальной жизни, если поставить два зеркала друг напротив друга, они начнут отражать друг друга, и каждое зеркало будет отражать не только другое зеркало, но и само себя в нём. Или если поставить микрофон перед колонками, в которые идёт звук с него, то он будет считывать тот звук, который он же отправил на колонки, из этих колонок.

Но как это используется в компьютере? Сначала напиши с помощью for или while код, который изобразит это:
![rec1.png]({{site.baseurl}}/lessons/processing/rec/rec1.png)

Тут круги, вложенные друг в друга. Самый большой диаметром в 200, самый маленький — в 20, каждый следующий диаметром на 20 меньше.

А теперь разберём, как тот же цикл сделать через рекурсию — функцию, которая использует сама себя:

```python

size(600,400)
translate(300,200)

#создадим функцию, которая всё нарисует
def recEllipse(x,y,itSize):
    ellipse(x,y,itSize,itSize)
    if itSize>1:
        recEllipse(x,y,itSize-20)

# а теперь вызовем. Да, без setup() и 
# draw в таком порядке, сначала
# описали функцию, потом использовали

recEllipse(0,0,200)
```

Что происходит, когда мы вызываем функцию recEllipse(0,0,200)? Рисуется круг диаметром 200. Но потом проверяется третий параметр — 200. Он больше 1? Да. Значит, снова запускается recEllipse(0,0,200-20). И снова нарисуется эллипс, но уже диаметром 180. И снова 180>1. Значит, будет нарисован круг диаметром 160, снова вызвана функция… И так пока не повезёт. 

Эта фигура, куча вложенных друг в друга кругов, это фрактал. Самоподобная фигура. Что это за фигура? Набор уменьшающихся вложенных кругов. Её можно разделить на 2 фигуры — самый большой круг и… и набор уменьшающихся вложенных кругов. И этот вложенный набор уменьшающихся кругов  это тоже круг + набор… Ну вы поняли.

В природе много фракталов. Вы когда нибудь думали о том, что дерево состоит из ствола и веток. Каждая из которых похожа на дерево. И у этой ветки — тоже похожие на деревья ветки. И так до листьев, которые, кстати, тоже похожи на деревья. А камни — это такие маленькие горы или скалы. И наоборот.

Но вернёмся к примеру. Зачем тут рекурсия, всё же решается циклом? В этом примере действительно цикл может быть и проще. Но как насчёт такой фигуры?

![rectrect.png]({{site.baseurl}}/lessons/processing/rec/rectrect.png)

Каков принцип? Да просто. Квадрат. И с четырёх сторон от него квадраты поменьше. И от них квадраты. Если такое рисовать в цикле — на каждом шаге всё больше квадратов и нужно отслеживать все координаты и размеры… Ужас. Можно это с помощью вложенных циклов сделать, но сложно… Рекурсия позволяет обойтись кодом в примерно 20 строчек. Как и для этого фрактала

![vetki.png]({{site.baseurl}}/lessons/processing/rec/vetki.png)

У меня код этого дерева занимает 17 строчек. Всей программы. Функция — 12 строчек. Через циклы это был бы код в разы больше.

## Задания по теме «Рекурсия»

![zadan.png]({{site.baseurl}}/lessons/processing/rec/zadan.png)

1. Создай фрактал из вложенных друг в друга квадратов
2. Поменяй код так, чтобы каждый из квадратов поворачивался на 45 градусов (пример ниже)
3. Фрактал из двух кругов — круг, справа и слева от него два круга в два раза меньше, справа и слева от каждого из них ещё в два раза меньше и т.д.
4. Фрактал из квадратов, как в примере
5. Фрактальное дерево
6. Свой проект 


